<!-- VERSION 2016.03.30 -->
<!--
* Copyright (C) 2015, HED Inc. All Rights Reserved.
-->
<!--
* Copyright (C) 2010-2011, Freescale Semiconductor, Inc. All Rights Reserved.
* The CFG element contains a list of recognized usb devices.
*  DEV elements provide a name, class, vid and pid for each device.
*
* Each LIST element contains a list of update instructions.
*  "Install" - Erase media and install firmware.
*  "Update" - Update firmware only.
*
* Each CMD element contains one update instruction of attribute type.
*  "pull" - Does UtpRead(body, file) transaction.
*  "push" - Does UtpWrite(body, file) transaction.
*  "drop" - Does UtpCommand(body) then waits for device to disconnect.
*  "boot" - Finds configured device, forces it to "body" device and downloads "file".
*  "find" - Waits for "timeout" seconds for the "body" device to connect.
*  "show" - Parse and show device info in "file".  
-->

<UCL>
  <CFG>
    <STATE name="BootStrap" dev="MX53" />
    <DEV name="MX53" vid="15A2" pid="004E"/>    
    <STATE name="Updater"   dev="Updater" />  
    <DEV name="Updater" vid="066F" pid="37FF" />
  </CFG>

  <LIST name="BOARD-TEST" desc="Board Test">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ mkdir -p /test">Sending Board Test</CMD>
    <CMD type="push" body="pipe tar -xjv -C /test > /dev/tty0 2>&1" file="board-test.tar.bz2">Sending Board Test</CMD>
    <CMD type="push" body="$ sync && sync">Sending Board Test</CMD>
    <CMD type="push" body="frf">Sending Board Test</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/persistent > /dev/tty0 2>&1">Sending Board Test</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p2 /mnt/persistent> /dev/tty0 2>&1">Sending Board Test</CMD>
    <CMD type="push" body="$ /test/linux-board-test -a -f 1>&2 &">Running Board Test</CMD>
  </LIST>

  <LIST name="FULL" desc="Full eMMC rewrite">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '***Formatting boot partition***' > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -f $FILE /tmp/splash">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash image checksum' > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '*** splash image installation complete' > /dev/tty0 2>&1">splash image installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ sync && sync">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Finishing rootfs write' > /dev/tty0 2>&1">Finishing rootfs write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing rootfs</CMD>
    <CMD type="push" body="frf">Finishing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Installing data' > /dev/tty0 2>&1">Installing data partition</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/ > /dev/tty0 2>&1" file="download/data.tar.bz2">Installing data</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="frf">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** Checking data checksum' > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="send" file="download/data.md5">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /">Checking data checksum</CMD>
    <CMD type="push" body="frf">Checking data checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** data installation complete' > /dev/tty0 2>&1">data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo Update Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="FULL-NO-DATA" desc="Full eMMC rewrite sans data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '***Formatting boot partition***' > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -f $FILE /tmp/splash">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash image checksum' > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '*** splash image installation complete' > /dev/tty0 2>&1">splash image installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Finishing rootfs write' > /dev/tty0 2>&1">Finishing rootfs write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing rootfs write</CMD>
    <CMD type="push" body="frf">Finishing rootfs write</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo Update Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="FULL-ARRANGER" desc="Full Arranger eMMC rewrite">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '***Formatting boot partition***' > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -f $FILE /tmp/splash">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash image checksum' > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '*** splash image installation complete' > /dev/tty0 2>&1">splash image installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ sync && sync">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Finishing rootfs write' > /dev/tty0 2>&1">Finishing rootfs write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing rootfs</CMD>
    <CMD type="push" body="frf">Finishing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/maps > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Preparing XML directory' > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ echo '*** Installing XML' > /dev/tty0 2>&1">Installing XML</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/xml > /dev/tty0 2>&1" file="download/xml.tar.bz2">Installing XML</CMD>
    <CMD type="push" body="$ echo '*** Finishing XML write' > /dev/tty0 2>&1">Finishing XML write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing XML write</CMD>
    <CMD type="push" body="frf">Finishing XML write</CMD>
    <CMD type="push" body="$ echo '*** Checking XML checksum' > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="send" file="download/xml.md5">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/xml && md5sum -c $FILE > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /">Checking XML checksum</CMD>
    <CMD type="push" body="frf">Checking XML checksum</CMD>
    <CMD type="push" body="$ echo '*** XML installation complete' > /dev/tty0 2>&1">XML installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing images directory' > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/images > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ echo '*** Installing images' > /dev/tty0 2>&1">Installing images</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/images > /dev/tty0 2>&1" file="download/images.tar.bz2">Installing images</CMD>
    <CMD type="push" body="$ echo '*** Finishing images write' > /dev/tty0 2>&1">Finishing images write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing images write</CMD>
    <CMD type="push" body="frf">Finishing images write</CMD>
    <CMD type="push" body="$ echo '*** Checking images checksum' > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="send" file="download/images.md5">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/images && md5sum -c $FILE > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /">Checking images checksum</CMD>
    <CMD type="push" body="frf">Checking images checksum</CMD>
    <CMD type="push" body="$ echo '*** images installation complete' > /dev/tty0 2>&1">images installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing fonts directory' > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/fonts > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ echo '*** Installing fonts' > /dev/tty0 2>&1">Installing fonts</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/fonts > /dev/tty0 2>&1" file="download/fonts.tar.bz2">Installing fonts</CMD>
    <CMD type="push" body="$ echo '*** Finishing fonts write' > /dev/tty0 2>&1">Finishing fonts write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing fonts write</CMD>
    <CMD type="push" body="frf">Finishing fonts write</CMD>
    <CMD type="push" body="$ echo '*** Checking fonts checksum' > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="send" file="download/fonts.md5">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/fonts && md5sum -c $FILE > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /">Checking fonts checksum</CMD>
    <CMD type="push" body="frf">Checking fonts checksum</CMD>
    <CMD type="push" body="$ echo '*** fonts installation complete' > /dev/tty0 2>&1">fonts installation complete</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting data partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo Update Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="FULL-ARRANGER-NO-DATA" desc="Full Arranger eMMC rewrite without data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '***Formatting boot partition***' > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -f $FILE /tmp/splash">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash image checksum' > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '*** splash image installation complete' > /dev/tty0 2>&1">splash image installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ sync && sync">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Finishing rootfs write' > /dev/tty0 2>&1">Finishing rootfs write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing rootfs</CMD>
    <CMD type="push" body="frf">Finishing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/maps > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting data partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo Update Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="uboot" desc="Load new u-boot">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
  </LIST>

  <LIST name="splash" desc="Load new splash image">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '*** splash image installation complete' > /dev/tty0 2>&1">splash image installation complete</CMD>
  </LIST>

  <LIST name="boot" desc="Load new boot files">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Updating bootpath.txt file' > /dev/tty0 2>&1">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ cat /mnt/storage/bootpath.txt | grep rootpartition">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo $(cat /mnt/storage/bootpath.txt | grep rootpartition) > /mnt/storage/bootpath.txt">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' >> /mnt/storage/bootpath.txt">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
  </LIST>

  <LIST name="Clear-Persistent-Data" desc="Clear Persistent Data Partition">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
  </LIST>

  <LIST name="Persistent-Data" desc="Load new persistent data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing persistent data partition' > /dev/tty0 2>&1">Preparing persistent data partition</CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Preparing persistent data partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing persistent data partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p2 /mnt/storage > /dev/tty0 2>&1">Preparing persistent data partition</CMD>
    <CMD type="push" body="$ echo '*** Installing persistent data' > /dev/tty0 2>&1">Installing persistent data</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/persistent.tar.bz2">Installing persistent data</CMD>
    <CMD type="push" body="$ echo '*** Finishing persistent data write' > /dev/tty0 2>&1">Finishing persistent data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data write</CMD>
    <CMD type="push" body="frf">Finishing persistent data write</CMD>
    <CMD type="push" body="$ echo '*** Checking persistent data checksum' > /dev/tty0 2>&1">Checking persistent data checksum</CMD>
    <CMD type="push" body="send" file="download/persistent.md5">Checking persistent data checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking persistent data checksum</CMD>
    <CMD type="push" body="$ cd /">Checking persistent data checksum</CMD>
    <CMD type="push" body="frf">Checking persistent data checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing persistent data write</CMD>
    <CMD type="push" body="$ echo '*** persistent data installation complete' > /dev/tty0 2>&1">persistent data installation complete</CMD>
  </LIST>

  <LIST name="rootfs" desc="Load new rootfs">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing rootfs write</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ cat /mnt/storage/bootpath.txt | grep bootpath">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo $(cat /mnt/storage/bootpath.txt | grep bootpath) > /mnt/storage/bootpath.txt">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Updating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
  </LIST>

  <LIST name="apps" desc="Load new apps">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Formatting apps partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
  </LIST>

  <LIST name="data" desc="Load new data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data directory' > /dev/tty0 2>&1">Preparing data directory</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing data directory</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data directory</CMD>
    <CMD type="push" body="$ echo '*** Installing data' > /dev/tty0 2>&1">Installing data</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/ > /dev/tty0 2>&1" file="download/data.tar.bz2">Installing data</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="frf">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** Checking data checksum' > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="send" file="download/data.md5">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /">Checking data checksum</CMD>
    <CMD type="push" body="frf">Checking data checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** data installation complete' > /dev/tty0 2>&1">data installation complete</CMD>
  </LIST>

  <LIST name="data-logger" desc="Load new data logger (obsolete)">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data logger directory' > /dev/tty0 2>&1">Preparing data logger directory</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data logger directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing data logger directory</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data logger directory</CMD>
    <CMD type="push" body="$ echo '*** Installing data logger' > /dev/tty0 2>&1">Installing data logger</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/ > /dev/tty0 2>&1" file="download/datalog.tar.bz2">Installing data logger</CMD>
    <CMD type="push" body="$ echo '*** Finishing data logger write' > /dev/tty0 2>&1">Finishing data logger write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data logger write</CMD>
    <CMD type="push" body="frf">Finishing data logger write</CMD>
    <CMD type="push" body="$ echo '*** Checking data logger checksum' > /dev/tty0 2>&1">Checking data logger checksum</CMD>
    <CMD type="push" body="send" file="download/datalog.md5">Checking data logger checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking data logger checksum</CMD>
    <CMD type="push" body="$ cd /">Checking data logger checksum</CMD>
    <CMD type="push" body="frf">Checking data logger checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing data logger write</CMD>
    <CMD type="push" body="$ echo '*** data logger installation complete' > /dev/tty0 2>&1">data logger installation complete</CMD>
  </LIST>

  <LIST name="xml" desc="Load new xml">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing XML directory' > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ rm -rfv /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ echo '*** Installing XML' > /dev/tty0 2>&1">Installing XML</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Installing XML</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/xml > /dev/tty0 2>&1" file="download/xml.tar.bz2">Installing XML</CMD>
    <CMD type="push" body="$ echo '*** Finishing XML write' > /dev/tty0 2>&1">Finishing XML write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing XML write</CMD>
    <CMD type="push" body="frf">Finishing XML write</CMD>
    <CMD type="push" body="$ echo '*** Checking XML checksum' > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="send" file="download/xml.md5">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/xml && md5sum -c $FILE > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /">Checking XML checksum</CMD>
    <CMD type="push" body="frf">Checking XML checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing XML write</CMD>
    <CMD type="push" body="$ echo '*** XML installation complete' > /dev/tty0 2>&1">XML installation complete</CMD>
  </LIST>

  <LIST name="images" desc="Load new images">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing images directory' > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ rm -rfv /mnt/storage/Arranger/images > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ echo '*** Installing images' > /dev/tty0 2>&1">Installing images</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/images > /dev/tty0 2>&1">Installing images</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/images > /dev/tty0 2>&1" file="download/images.tar.bz2">Installing images</CMD>
    <CMD type="push" body="$ echo '*** Finishing images write' > /dev/tty0 2>&1">Finishing images write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing images write</CMD>
    <CMD type="push" body="frf">Finishing images write</CMD>
    <CMD type="push" body="$ echo '*** Checking images checksum' > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="send" file="download/images.md5">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/images && md5sum -c $FILE > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /">Checking images checksum</CMD>
    <CMD type="push" body="frf">Checking images checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing images write</CMD>
    <CMD type="push" body="$ echo '*** images installation complete' > /dev/tty0 2>&1">images installation complete</CMD>
  </LIST>

  <LIST name="fonts" desc="Load new fonts">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing fonts directory' > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ rm -fv /mnt/storage/Arranger/fonts/* > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ echo '*** Installing fonts' > /dev/tty0 2>&1">Installing fonts</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/fonts > /dev/tty0 2>&1">Installing fonts</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/fonts > /dev/tty0 2>&1" file="download/fonts.tar.bz2">Installing fonts</CMD>
    <CMD type="push" body="$ echo '*** Finishing fonts write' > /dev/tty0 2>&1">Finishing fonts write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing fonts write</CMD>
    <CMD type="push" body="frf">Finishing fonts write</CMD>
    <CMD type="push" body="$ echo '*** Checking fonts checksum' > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="send" file="download/fonts.md5">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/fonts && md5sum -c $FILE > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /">Checking fonts checksum</CMD>
    <CMD type="push" body="frf">Checking fonts checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing fonts write</CMD>
    <CMD type="push" body="$ echo '*** fonts installation complete' > /dev/tty0 2>&1">fonts installation complete</CMD>
  </LIST>

  <LIST name="Touchscreen-Calibration" desc="Touchscreen Calibration">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing for touchscreen calibration' > /dev/tty0 2>&1">Preparing touchscreen calibration</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/persistent > /dev/tty0 2>&1">Preparing touchscreen calibration</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p2 /mnt/persistent> /dev/tty0 2>&1">Initializing touchscreen calibration</CMD>
    <CMD type="push" body="$ /etc/init.d/input-sx865x calibrate &">Touch points on display to calibrate</CMD>
  </LIST>

  <LIST name="Touchscreen-Verify" desc="Touchscreen Calibration Verify">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing touchscreen verification' > /dev/tty0 2>&1">Preparing touchscreen verification</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/persistent > /dev/tty0 2>&1">Preparing touchscreen verification</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p2 /mnt/persistent> /dev/tty0 2>&1">Initializing touchscreen verification</CMD>
    <CMD type="push" body="$ /etc/init.d/input-sx865x verify &">Verify calibration on touchscreen</CMD>
  </LIST>

  <LIST name="File-System-Dump" desc="File system dump">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Checking for USB Mass Storage device connected to Port E' > /dev/tty0 2>&1">Checking for USB Mass Storage device</CMD>
    <CMD type="push" body="$ ls -lha /dev/sda1 > /dev/tty0 2>&1">Checking for USB Mass Storage device</CMD>
    <CMD type="push" body="$ echo '*** Mounting USB Mass Storage device' > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ mount /dev/sda1 /mnt/external_storage > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ rm -frv /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ sync && sync">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ echo '*** Perparing for file system dump' > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/boot > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/persistent > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/rootfs1 > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/rootfs2 > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/apps > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/data > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ echo '*** Starting file system dump' > /dev/tty0 2>&1">Starting file system dump</CMD>
    <CMD type="push" body="$ echo '*** u-boot1 dump' > /dev/tty0 2>&1">u-boot1 dump</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) | 0x1)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot1 dump</CMD>
    <CMD type="push" body="$ dd if=/dev/mmcblk0 of=/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot1.imx bs=1024 count=1022 skip=1 > /dev/tty0 2>&1">u-boot1 dump</CMD>
    <CMD type="push" body="$ sync && sync">u-boot1 dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum u-boot1.imx | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot1.imx.md5 > /dev/tty0 2>&1 && cd /">u-boot1 checksum</CMD>
    <CMD type="push" body="$ sync && sync">u-boot1 checksum</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) & 0xF8)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot1 dump</CMD>
    <CMD type="push" body="$ echo '*** u-boot2 dump' > /dev/tty0 2>&1">u-boot2 dump</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) | 0x2)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot2 dump</CMD>
    <CMD type="push" body="$ dd if=/dev/mmcblk0 of=/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot2.imx bs=1024 count=1022 skip=1 > /dev/tty0 2>&1">u-boot2 dump</CMD>
    <CMD type="push" body="$ sync && sync">u-boot2 dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum u-boot2.imx | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot2.imx.md5 > /dev/tty0 2>&1 && cd /">u-boot2 checksum</CMD>
    <CMD type="push" body="$ sync && sync">u-boot2 checksum</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) & 0xF8)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot2 dump</CMD>
    <CMD type="push" body="$ echo '*** boot-a dump' > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">boot-a dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p1 /mnt/boot > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/boot/a -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.tar.bz2 --exclude='splash' . > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ cd /mnt/boot/a && for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.md5 > /dev/tty0 2>&1; fi; done; cd /">boot-a checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ echo '*** boot-b dump' > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/boot/b -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.tar.bz2 --exclude='splash' . > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ cd /mnt/boot/b && for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.md5 > /dev/tty0 2>&1; fi; done; cd /">boot-b checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ echo '*** bootpath.txt dump' > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ cp -fv /mnt/boot/bootpath.txt /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/ > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ echo '*** splash dump' > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ convert /mnt/boot/splash png:/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/splash > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum splash | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/splash.md5 > /dev/tty0 2>&1 && cd /">zImage checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ umount /mnt/boot > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ echo '*** persistent data file system dump' > /dev/tty0 2>&1">persistent data dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p2 /mnt/persistent > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/persistent -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/persistent; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.md5 > /dev/tty0 2>&1; fi; done; cd /">persistent data file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">persistent data file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/persistent > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ echo '*** rootfs1 file system dump' > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p3 /mnt/rootfs1 > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/rootfs1 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.tar.bz2 --exclude='lost+found' --exclude='etc/mtab' --exclude='dev/*' . > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/rootfs1; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.md5 > /dev/tty0 2>&1; fi; done; cd /">rootfs1 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs1 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/rootfs1 > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ echo '*** rootfs2 file system dump' > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p4 /mnt/rootfs2 > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/rootfs2 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.tar.bz2 --exclude='lost+found' --exclude='etc/mtab' --exclude='dev/*' . > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/rootfs2; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.md5 > /dev/tty0 2>&1; fi; done; cd /">rootfs2 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs2 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/rootfs2 > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ echo '*** apps1 file system dump' > /dev/tty0 2>&1">apps1 data dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p5 /mnt/apps > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/apps/apps1 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/apps/apps1; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.md5 > /dev/tty0 2>&1; fi; done; cd /">apps1 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps1 file system checksum</CMD>
    <CMD type="push" body="$ echo '*** apps2 file system dump' > /dev/tty0 2>&1">apps2 data dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/apps/apps2 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/apps/apps2; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.md5 > /dev/tty0 2>&1; fi; done; cd /">apps2 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps2 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/apps > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ echo '*** data file system dump' > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p6 /mnt/data > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/data -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/data.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/data; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/data.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/data.md5 > /dev/tty0 2>&1; fi; done; cd /">data file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">data file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/data > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ echo '*** Finishing file system dump' > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ umount /mnt/external_storage > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ echo '*** File system dump complete' > /dev/tty0 2>&1">File system dump complete</CMD>
  </LIST>

  <LIST name="File-System-Dump-Arranger" desc="File system dump for Arranger">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Checking for USB Mass Storage device connected to Port E' > /dev/tty0 2>&1">Checking for USB Mass Storage device</CMD>
    <CMD type="push" body="$ ls -lha /dev/sda1 > /dev/tty0 2>&1">Checking for USB Mass Storage device</CMD>
    <CMD type="push" body="$ echo '*** Mounting USB Mass Storage device' > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ mount /dev/sda1 /mnt/external_storage > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ rm -frv /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ sync && sync">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) > /dev/tty0 2>&1">Mounting USB Mass Storage device</CMD>
    <CMD type="push" body="$ echo '*** Perparing for file system dump' > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/boot > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/persistent > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/rootfs1 > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/rootfs2 > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/apps > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/data > /dev/tty0 2>&1">Perparing for file system dump</CMD>
    <CMD type="push" body="$ echo '*** Starting file system dump' > /dev/tty0 2>&1">Starting file system dump</CMD>
    <CMD type="push" body="$ echo '*** u-boot1 dump' > /dev/tty0 2>&1">u-boot1 dump</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) | 0x1)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot1 dump</CMD>
    <CMD type="push" body="$ dd if=/dev/mmcblk0 of=/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot1.imx bs=1024 count=1022 skip=1 > /dev/tty0 2>&1">u-boot1 dump</CMD>
    <CMD type="push" body="$ sync && sync">u-boot1 dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum u-boot1.imx | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot1.imx.md5 > /dev/tty0 2>&1 && cd /">u-boot1 checksum</CMD>
    <CMD type="push" body="$ sync && sync">u-boot1 checksum</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) & 0xF8)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot1 dump</CMD>
    <CMD type="push" body="$ echo '*** u-boot2 dump' > /dev/tty0 2>&1">u-boot2 dump</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) | 0x2)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot2 dump</CMD>
    <CMD type="push" body="$ dd if=/dev/mmcblk0 of=/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot2.imx bs=1024 count=1022 skip=1 > /dev/tty0 2>&1">u-boot2 dump</CMD>
    <CMD type="push" body="$ sync && sync">u-boot2 dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum u-boot2.imx | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/u-boot2.imx.md5 > /dev/tty0 2>&1 && cd /">u-boot2 checksum</CMD>
    <CMD type="push" body="$ sync && sync">u-boot2 checksum</CMD>
    <CMD type="push" body="$ echo $(($(cat /sys/class/mmc_host/mmc0/mmc0\:0001/boot_info | grep boot_partition | cut -d ':' -f 2 | cut -d ';' -f 1) & 0xF8)) > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">u-boot2 dump</CMD>
    <CMD type="push" body="$ echo '*** boot-a dump' > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ sync && partprobe && sync">boot-a dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p1 /mnt/boot > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/boot/a -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.tar.bz2 --exclude='splash' . > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ cd /mnt/boot/a && for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-a.md5 > /dev/tty0 2>&1; fi; done; cd /">boot-a checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">boot-a dump</CMD>
    <CMD type="push" body="$ echo '*** boot-b dump' > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/boot/b -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.tar.bz2 --exclude='splash' . > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ cd /mnt/boot/b && for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/boot-b.md5 > /dev/tty0 2>&1; fi; done; cd /">boot-b checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">boot-b dump</CMD>
    <CMD type="push" body="$ echo '*** bootpath.txt dump' > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ cp -fv /mnt/boot/bootpath.txt /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/ > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">bootpath.txt dump</CMD>
    <CMD type="push" body="$ echo '*** splash dump' > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ convert /mnt/boot/splash png:/mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/splash > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ cd /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial) && md5sum splash | tee /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/splash.md5 > /dev/tty0 2>&1 && cd /">zImage checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ umount /mnt/boot > /dev/tty0 2>&1">splash dump</CMD>
    <CMD type="push" body="$ echo '*** persistent data file system dump' > /dev/tty0 2>&1">persistent data dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p2 /mnt/persistent > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/persistent -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/persistent; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/persistent.md5 > /dev/tty0 2>&1; fi; done; cd /">persistent data file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">persistent data file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/persistent > /dev/tty0 2>&1">persistent data file system dump</CMD>
    <CMD type="push" body="$ echo '*** rootfs1 file system dump' > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p3 /mnt/rootfs1 > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/rootfs1 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.tar.bz2 --exclude='lost+found' --exclude='etc/mtab' --exclude='dev/*' . > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/rootfs1; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs1.md5 > /dev/tty0 2>&1; fi; done; cd /">rootfs1 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs1 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/rootfs1 > /dev/tty0 2>&1">rootfs1 file system dump</CMD>
    <CMD type="push" body="$ echo '*** rootfs2 file system dump' > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p4 /mnt/rootfs2 > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/rootfs2 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.tar.bz2 --exclude='lost+found' --exclude='etc/mtab' --exclude='dev/*' . > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/rootfs2; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/rootfs2.md5 > /dev/tty0 2>&1; fi; done; cd /">rootfs2 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">rootfs2 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/rootfs2 > /dev/tty0 2>&1">rootfs2 file system dump</CMD>
    <CMD type="push" body="$ echo '*** apps1 file system dump' > /dev/tty0 2>&1">apps1 data dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p5 /mnt/apps > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/apps/apps1 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps1 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/apps/apps1; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps1.md5 > /dev/tty0 2>&1; fi; done; cd /">apps1 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps1 file system checksum</CMD>
    <CMD type="push" body="$ echo '*** apps2 file system dump' > /dev/tty0 2>&1">apps2 data dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/apps/apps2 -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.tar.bz2 --exclude='lost+found' . > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ cd /mnt/apps/apps2; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/apps2.md5 > /dev/tty0 2>&1; fi; done; cd /">apps2 file system checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">apps2 file system checksum</CMD>
    <CMD type="push" body="$ umount /mnt/apps > /dev/tty0 2>&1">apps2 file system dump</CMD>
    <CMD type="push" body="$ echo '*** data file system dump' > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ mount -o ro /dev/mmcblk0p6 /mnt/data > /dev/tty0 2>&1">data file system dump</CMD>
    <CMD type="push" body="$ echo '*** xml dump' > /dev/tty0 2>&1">xml dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/data/Arranger/xml -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/xml.tar.bz2 . > /dev/tty0 2>&1">xml dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">xml dump</CMD>
    <CMD type="push" body="$ cd /mnt/data/Arranger/xml; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/xml.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/xml.md5 > /dev/tty0 2>&1; fi; done; cd /">xml checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">xml checksum</CMD>
    <CMD type="push" body="$ echo '*** images dump' > /dev/tty0 2>&1">images dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/data/Arranger/images -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/images.tar.bz2 . > /dev/tty0 2>&1">images dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">images dump</CMD>
    <CMD type="push" body="$ cd /mnt/data/Arranger/images; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/images.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/images.md5 > /dev/tty0 2>&1; fi; done; cd /">images checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">images checksum</CMD>
    <CMD type="push" body="$ echo '*** fonts dump' > /dev/tty0 2>&1">fonts dump</CMD>
    <CMD type="push" body="$ tar -C /mnt/data/Arranger/fonts -cjpvf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/fonts.tar.bz2 . > /dev/tty0 2>&1">fonts dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">fonts dump</CMD>
    <CMD type="push" body="$ cd /mnt/data/Arranger/fonts; for i in $(tar -tf /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/fonts.tar.bz2); do if [ -f $i ]; then md5sum $i | tee -a /mnt/external_storage/PM-041_filesystem_dump/$(cat /sys/class/mmc_host/mmc0/mmc0\:0001/serial)/fonts.md5 > /dev/tty0 2>&1; fi; done; cd /">fonts checksum</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">fonts checksum</CMD>
    <CMD type="push" body="$ umount /mnt/data > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ echo '*** Finishing file system dump' > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ umount /mnt/external_storage > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ sync && sync > /dev/tty0 2>&1">Finishing file system dump</CMD>
    <CMD type="push" body="$ echo '*** File system dump complete' > /dev/tty0 2>&1">File system dump complete</CMD>
  </LIST>

  <LIST name="READ-FUSES" desc="Read eFuse values">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
<!--    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>-->
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
<!--    <CMD type="push" body="$ echo '*** Value of eFuse address 0x0800' > /dev/tty0 2>&1">Read eFuse 0x0800</CMD>-->
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2048 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0800</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x080C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2072 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0818</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2076 count=1">Read eFuse 0x081C</CMD>
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x0820-0x083C (SJC Challenge/Unique ID)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2080 count=1">Read eFuse 0x0820</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2084 count=1">Read eFuse 0x0824</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2088 count=1">Read eFuse 0x0828</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2092 count=1">Read eFuse 0x082C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2096 count=1">Read eFuse 0x0830</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2100 count=1">Read eFuse 0x0834</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2104 count=1">Read eFuse 0x0838</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2108 count=1">Read eFuse 0x083C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2112 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0840</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2116 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0844</CMD>
    <CMD type="push" body="$ echo '*** Value of eFuse address 0x0860-00x87C, 0x0860-0x087C (General Purpose)' > /dev/tty0 2>&1">Read eFuse 0x0860</CMD>
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x0860-0x087C (General Purpose)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2144 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0860</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2148 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0864</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2152 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0868</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2156 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x086C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2160 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0870</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2164 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0874</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2168 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0878</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2172 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x087C</CMD>-->
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3072 count=1">Read eFuse 0x0C00</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3076 count=1">Read eFuse 0x0C04</CMD>
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x0C08-0x0C20 (SJC Response)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3080 count=7">Read eFuse 0x0C08</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3084 count=1">Read eFuse 0x0C0C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3088 count=1">Read eFuse 0x0C10</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3092 count=1">Read eFuse 0x0C14</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3096 count=1">Read eFuse 0x0C18</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3100 count=1">Read eFuse 0x0C1C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3104 count=1">Read eFuse 0x0C20</CMD>
    <CMD type="push" body="$ echo '*** Value of eFuse address 0x0C24-0x0C38 (MAC Address)' > /dev/tty0 2>&1">Read eFuse 0x0C24</CMD>
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x0C24-0x0C38 (MAC Address)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3108 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C24</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3112 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C28</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3116 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C2C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3120 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C30</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3124 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C34</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=3128 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x0C38</CMD>
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x1400-0x147C (SRK Hash)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5120 count=1">Read eFuse 0x1400</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5124 count=1">Read eFuse 0x1404</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5128 count=1">Read eFuse 0x1408</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5132 count=1">Read eFuse 0x140C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5136 count=1">Read eFuse 0x1410</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5140 count=1">Read eFuse 0x1414</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5144 count=1">Read eFuse 0x1418</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5148 count=1">Read eFuse 0x141C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5152 count=1">Read eFuse 0x1420</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5156 count=1">Read eFuse 0x1424</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5160 count=1">Read eFuse 0x1428</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5164 count=1">Read eFuse 0x142C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5168 count=1">Read eFuse 0x1430</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5172 count=1">Read eFuse 0x1434</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5176 count=1">Read eFuse 0x1438</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5180 count=1">Read eFuse 0x143C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5184 count=1">Read eFuse 0x1440</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5188 count=1">Read eFuse 0x1444</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5192 count=1">Read eFuse 0x1448</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5196 count=1">Read eFuse 0x144C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5200 count=1">Read eFuse 0x1450</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5204 count=1">Read eFuse 0x1454</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5208 count=1">Read eFuse 0x1458</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5212 count=1">Read eFuse 0x145C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5216 count=1">Read eFuse 0x1460</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5220 count=1">Read eFuse 0x1464</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5224 count=1">Read eFuse 0x1468</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5228 count=1">Read eFuse 0x146C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5232 count=1">Read eFuse 0x1470</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5236 count=1">Read eFuse 0x1474</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5240 count=1">Read eFuse 0x1478</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=5244 count=1">Read eFuse 0x147C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6152 count=1">Read eFuse 0x1808</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1">Read eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6160 count=1">Read eFuse 0x1810</CMD>
<!--    <CMD type="push" body="$ echo '*** Value of eFuse address 0x1814-0x181C (General Purpose)' > /dev/tty0 2>&1">Read eFuse 0x1814</CMD>-->
    <CMD type="push" body="$ logger 'mxc_iim: eFuse address 0x1814-0x181C (General Purpose)'"/>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6164 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x1814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6168 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x1818</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6172 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Read eFuse 0x181C</CMD>
    <CMD type="push" body="$ cat /var/log/messages | grep mxc_iim | cut -d ':' -f 5-10 > /tmp/fuse_values.txt"/>
    <CMD type="push" body="$ cat /tmp/fuse_values.txt > /dev/console"/>
    <CMD type="push" body="$ echo eFuse reading Complete">Done</CMD>
  </LIST>

  <LIST name="WRITE-FUSES" desc="Write eFuse values for eMMC">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && tail -1 /var/log/messages | cut -d ':' -f 5-10 > /dev/tty0">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
  </LIST>

  <LIST name="PRODUCTION" desc="Production Installation">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Mounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** data installation complete' > /dev/tty0 2>&1">data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x10 ]; then false; fi">Check eFuse 0x804 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x70 ]; then false; fi">Check eFuse 0x80C Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x41 ]; then false; fi">Check eFuse 0x810 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x20 ]; then false; fi">Check eFuse 0x814 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x4 ]; then false; fi">Check eFuse 0x180C Value</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
    <CMD type="push" body="$ echo Production Programming Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="PRODUCTION-WITH-DATA" desc="Production Installation with data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Mounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Installing data logger' > /dev/tty0 2>&1">Installing data partition</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/ > /dev/tty0 2>&1" file="download/datalog.tar.bz2">Installing data logger</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="frf">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** Checking data checksum' > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="send" file="download/datalog.md5">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /">Checking data checksum</CMD>
    <CMD type="push" body="frf">Checking data checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** data installation complete' > /dev/tty0 2>&1">data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x10 ]; then false; fi">Check eFuse 0x804 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x70 ]; then false; fi">Check eFuse 0x80C Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x41 ]; then false; fi">Check eFuse 0x810 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x20 ]; then false; fi">Check eFuse 0x814 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x4 ]; then false; fi">Check eFuse 0x180C Value</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
    <CMD type="push" body="$ echo Production Programming Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="PRODUCTION-WITH-APPDATA" desc="Production Installation with application data">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Mounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Installing data' > /dev/tty0 2>&1">Installing data partition</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/ > /dev/tty0 2>&1" file="download/data.tar.bz2">Installing data</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="frf">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** Checking data checksum' > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="send" file="download/data.md5">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking data checksum</CMD>
    <CMD type="push" body="$ cd /">Checking data checksum</CMD>
    <CMD type="push" body="frf">Checking data checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ echo '*** data installation complete' > /dev/tty0 2>&1">data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x10 ]; then false; fi">Check eFuse 0x804 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x70 ]; then false; fi">Check eFuse 0x80C Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x41 ]; then false; fi">Check eFuse 0x810 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x20 ]; then false; fi">Check eFuse 0x814 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x4 ]; then false; fi">Check eFuse 0x180C Value</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
    <CMD type="push" body="$ echo Production Programming Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>

  <LIST name="PRODUCTION-ARRANGER" desc="Production Installation for Arranger">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Mounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/images > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/fonts > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/maps > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting data partition</CMD>
    <CMD type="push" body="$ echo '*** Data installation complete' > /dev/tty0 2>&1">Data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x10 ]; then false; fi">Check eFuse 0x804 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x70 ]; then false; fi">Check eFuse 0x80C Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x41 ]; then false; fi">Check eFuse 0x810 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x20 ]; then false; fi">Check eFuse 0x814 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x4 ]; then false; fi">Check eFuse 0x180C Value</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
    <CMD type="push" body="$ echo Production Programming Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>
 
  <LIST name="PRODUCTION-ARRANGER-WITH-DATA" desc="Production Installation for Arranger with data files">
    <CMD type="boot" body="BootStrap" file ="u-boot.imx-mfgtool" >Read from DDR script from U-Boot to init DDR Memory.</CMD>
    <CMD type="load" file="uImage-mfgtool" address="0x70800000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Kernel.</CMD>
    <CMD type="load" file="rootfs.img" address="0x70B00000"
        loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE" >Doing Initramfs.</CMD>
    <CMD type="jump" > Jumping to OS image. </CMD>
    <CMD type="find" body="Updater" timeout="240"/>
    <CMD type="push" body="$ if [ ! -b /dev/mmcblk0 ]; then mknod /dev/mmcblk0 b 179 0; fi"/>
    <CMD type="push" body="send" file="mksdcard-PM041.sh">Sending partitioning script</CMD>
    <CMD type="push" body="$ chmod +x $FILE">Running partitioning script</CMD>
    <CMD type="push" body="$ sh $FILE /dev/mmcblk0 > /dev/tty0 2>&1">Running partitioning script</CMD>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p1,/dev/mmcblk0p1,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p2,/dev/mmcblk0p2,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p3,/dev/mmcblk0p3,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p4,/dev/mmcblk0p4,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p5,/dev/mmcblk0p5,block"/>
    <CMD type="push" body="mknod block/mmcblk0,mmcblk0p6,/dev/mmcblk0p6,block"/>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending u-boot' > /dev/tty0 2>&1">Sending u-boot</CMD>
    <CMD type="push" body="send" file="download/u-boot.imx">Sending u-boot</CMD>
    <CMD type="push" body="$ echo '***Installing u-boot***' > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 1 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=/dev/zero of=/dev/mmcblk0 bs=1024 count=1022 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ sync && sync">Installing u-boot</CMD>
    <CMD type="push" body="$ dd if=$FILE of=/dev/mmcblk0 bs=1024 seek=1 > /dev/tty0 2>&1">Installing u-boot</CMD>
    <CMD type="push" body="$ echo '*** Finishing u-boot write' > /dev/tty0 2>&1">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 8 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_config">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo 2 > /sys/class/mmc_host/mmc0/mmc0\:0001/boot_bus_config">Finishing u-boot write</CMD>
    <CMD type="push" body="frf">Finishing u-boot write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing u-boot write</CMD>
    <CMD type="push" body="$ echo '*** u-boot installation complete' > /dev/tty0 2>&1">u-boot installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ sync && partprobe && sync">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkfs.vfat -n boot /dev/mmcblk0p1 > /dev/tty0 2>&1">Formatting boot partition</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ mount /dev/mmcblk0p1 /mnt/storage > /dev/tty0 2>&1">Mounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Sending splash image' > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="send" file="download/splash">Sending splash image</CMD>
    <CMD type="push" body="$ cp -vf $FILE /tmp/splash > /dev/tty0 2>&1">Sending splash image</CMD>
    <CMD type="push" body="$ sync && sync">Sending splash image</CMD>
    <CMD type="push" body="frf">Sending splash image</CMD>
    <CMD type="push" body="$ echo '*** Checking splash checksum' > /dev/tty0 2>&1">Checking splash checksum</CMD>
    <CMD type="push" body="send" file="download/splash.md5">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /tmp/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking splash image checksum</CMD>
    <CMD type="push" body="$ cd /">Checking splash image checksum</CMD>
    <CMD type="push" body="frf">Checking splash image checksum</CMD>
    <CMD type="push" body="$ echo '*** Installing splash image' > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ convert /tmp/splash ppm:/mnt/storage/splash > /dev/tty0 2>&1">Installing splash image</CMD>
    <CMD type="push" body="$ echo '*** Finishing splash image write' > /dev/tty0 2>&1">Finishing splash image write</CMD>
    <CMD type="push" body="$ rm -f /tmp/splash">Finishing splash image write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing splash image write</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Creating bootpath.txt file' > /dev/tty0 2>&1">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'bootpath=a' > /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo 'rootpartition=3' >> /mnt/storage/bootpath.txt">Creating bootpath.txt file</CMD>
    <CMD type="push" body="$ echo '*** Installing boot files' > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/a /mnt/storage/b > /dev/tty0 2>&1">Installing boot files</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/a > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ sync && sync">Installing boot files</CMD>
    <CMD type="push" body="frf">Installing boot files</CMD> -->
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/b > /dev/tty0 2>&1" file="download/boot.tar.bz2">Installing boot files</CMD>
    <CMD type="push" body="$ echo '*** Finishing boot files write' > /dev/tty0 2>&1">Finishing boot files write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing boot files write</CMD>
    <CMD type="push" body="frf">Finishing boot files write</CMD> -->
    <CMD type="push" body="$ echo '*** Checking boot files checksum' > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="send" file="download/boot.md5">Checking bootfiles checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/a && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/b && md5sum -c $FILE > /dev/tty0 2>&1">Checking boot files checksum</CMD>
    <CMD type="push" body="$ cd /">Checking boot files checksum</CMD>
    <CMD type="push" body="frf">Checking boot files checksum</CMD>
    <CMD type="push" body="$ echo '*** Boot files installation complete' > /dev/tty0 2>&1">Boot files installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting boot partition</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ mkfs.ext2 /dev/mmcblk0p2 -L persistent > /dev/tty0 2>&1">Formatting persistent data partition</CMD>
    <CMD type="push" body="$ sync && sync">Finishing persistent data format</CMD>
    <CMD type="push" body="$ echo '*** Persistent data format complete' > /dev/tty0 2>&1">Persistent data format complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing rootfs partition' > /dev/tty0 2>&1">Preparing rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p3 -L rootfs1 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p4 -L rootfs2 > /dev/tty0 2>&1">Formatting rootfs partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p3 /mnt/storage > /dev/tty0 2>&1">Mounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** Installing rootfs' > /dev/tty0 2>&1">Installing rootfs</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage > /dev/tty0 2>&1" file="download/rootfs.tar.bz2">Installing rootfs</CMD>
    <CMD type="push" body="$ sync && sync">Installing rootfs</CMD>
    <CMD type="push" body="frf">Installing rootfs</CMD>
    <CMD type="push" body="$ echo '*** Checking rootfs checksum' > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="send" file="download/rootfs.md5">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/ && md5sum -c $FILE > /dev/tty0 2>&1">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ cd /">Checking rootfs checksum</CMD>
    <CMD type="push" body="frf">Checking rootfs checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting rootfs partition</CMD>
    <CMD type="push" body="$ echo '*** rootfs installation complete' > /dev/tty0 2>&1">rootfs installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing apps partition' > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p5 -L apps > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p5 /mnt/storage > /dev/tty0 2>&1">Preparing apps partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/apps1 /mnt/storage/apps2 > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ cd /mnt/storage && ln -sfv apps1 apps > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Installing apps' > /dev/tty0 2>&1">Installing apps</CMD>
    <CMD type="push" body="pipe tar -xjv -C /mnt/storage/apps > /dev/tty0 2>&1" file="download/apps.tar.bz2">Installing apps</CMD>
    <CMD type="push" body="$ echo '*** Finishing apps write' > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing apps write</CMD>
    <CMD type="push" body="frf">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** Checking apps checksum' > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="send" file="download/apps.md5">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/apps && md5sum -c $FILE > /dev/tty0 2>&1">Checking apps checksum</CMD>
    <CMD type="push" body="$ cd /">Checking apps checksum</CMD>
    <CMD type="push" body="frf">Checking apps checksum</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Finishing apps write</CMD>
    <CMD type="push" body="$ echo '*** apps installation complete' > /dev/tty0 2>&1">apps installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing data partition' > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkfs.ext4 /dev/mmcblk0p6 -L data > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mount -t ext4 /dev/mmcblk0p6 /mnt/storage > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/images > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/Arranger/fonts > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ mkdir -pv /mnt/storage/maps > /dev/tty0 2>&1">Preparing data partition</CMD>
    <CMD type="push" body="$ echo '*** Preparing XML directory' > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/xml > /dev/tty0 2>&1">Preparing XML directory</CMD>
    <CMD type="push" body="$ echo '*** Installing XML' > /dev/tty0 2>&1">Installing XML</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/xml > /dev/tty0 2>&1" file="download/xml.tar.bz2">Installing XML</CMD>
    <CMD type="push" body="$ echo '*** Finishing XML write' > /dev/tty0 2>&1">Finishing XML write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing XML write</CMD>
    <CMD type="push" body="frf">Finishing XML write</CMD>
    <CMD type="push" body="$ echo '*** Checking XML checksum' > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="send" file="download/xml.md5">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/xml && md5sum -c $FILE > /dev/tty0 2>&1">Checking XML checksum</CMD>
    <CMD type="push" body="$ cd /">Checking XML checksum</CMD>
    <CMD type="push" body="frf">Checking XML checksum</CMD>
    <CMD type="push" body="$ echo '*** XML installation complete' > /dev/tty0 2>&1">XML installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing images directory' > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/images > /dev/tty0 2>&1">Preparing images directory</CMD>
    <CMD type="push" body="$ echo '*** Installing images' > /dev/tty0 2>&1">Installing images</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/images > /dev/tty0 2>&1" file="download/images.tar.bz2">Installing images</CMD>
    <CMD type="push" body="$ echo '*** Finishing images write' > /dev/tty0 2>&1">Finishing images write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing images write</CMD>
    <CMD type="push" body="frf">Finishing images write</CMD>
    <CMD type="push" body="$ echo '*** Checking images checksum' > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="send" file="download/images.md5">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/images && md5sum -c $FILE > /dev/tty0 2>&1">Checking images checksum</CMD>
    <CMD type="push" body="$ cd /">Checking images checksum</CMD>
    <CMD type="push" body="frf">Checking images checksum</CMD>
    <CMD type="push" body="$ echo '*** images installation complete' > /dev/tty0 2>&1">images installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ echo '*** Preparing fonts directory' > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ mkdir -p /mnt/storage/Arranger/fonts > /dev/tty0 2>&1">Preparing fonts directory</CMD>
    <CMD type="push" body="$ echo '*** Installing fonts' > /dev/tty0 2>&1">Installing fonts</CMD>
    <CMD type="push" body="pipe BZIP2=--small tar -xjv -C /mnt/storage/Arranger/fonts > /dev/tty0 2>&1" file="download/fonts.tar.bz2">Installing fonts</CMD>
    <CMD type="push" body="$ echo '*** Finishing fonts write' > /dev/tty0 2>&1">Finishing fonts write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing fonts write</CMD>
    <CMD type="push" body="frf">Finishing fonts write</CMD>
    <CMD type="push" body="$ echo '*** Checking fonts checksum' > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="send" file="download/fonts.md5">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /mnt/storage/Arranger/fonts && md5sum -c $FILE > /dev/tty0 2>&1">Checking fonts checksum</CMD>
    <CMD type="push" body="$ cd /">Checking fonts checksum</CMD>
    <CMD type="push" body="frf">Checking fonts checksum</CMD>
    <CMD type="push" body="$ echo '*** fonts installation complete' > /dev/tty0 2>&1">fonts installation complete</CMD>
    <CMD type="push" body="$ echo '*** Finishing data write' > /dev/tty0 2>&1">Finishing data write</CMD>
    <CMD type="push" body="$ sync && sync">Finishing data write</CMD>
    <CMD type="push" body="$ umount /mnt/storage > /dev/tty0 2>&1">Unmounting data partition</CMD>
    <CMD type="push" body="$ echo '*** Data installation complete' > /dev/tty0 2>&1">Data installation complete</CMD>
    <CMD type="push" body="$ echo '--------------------------------------------------' > /dev/tty0 2>&1"></CMD>
    <CMD type="push" body="$ cat /sys/class/misc/mxc_iim/dev"/>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x804' > /dev/tty0 2>&1">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ echo \"0x804 0x10\" > /dev/mxc_iim ">Set eFuse 0x804</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2052 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x10 ]; then false; fi">Check eFuse 0x804 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x80C' > /dev/tty0 2>&1">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ echo \"0x80c 0x70\" > /dev/mxc_iim ">Set eFuse 0x80C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2060 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x70 ]; then false; fi">Check eFuse 0x80C Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x810' > /dev/tty0 2>&1">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ echo \"0x810 0x41\" > /dev/mxc_iim ">Set eFuse 0x810</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2064 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x41 ]; then false; fi">Check eFuse 0x810 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x814' > /dev/tty0 2>&1">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ echo \"0x814 0x20=\" > /dev/mxc_iim ">Set eFuse 0x814</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=2068 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x20 ]; then false; fi">Check eFuse 0x814 Value</CMD>
    <CMD type="push" body="$ echo '*** Setting value of eFuse address 0x180C' > /dev/tty0 2>&1">Set eFuse 0x180C</CMD>
    <!-- Use the USB 120MHz clock with the SATA PHY to use the temperature sensor that is part of the SATA PHY -->
    <CMD type="push" body="$ echo \"0x180C 0x04=\" > /dev/mxc_iim ">Set eFuse 0x180C</CMD>
    <CMD type="push" body="$ dd if=/dev/mxc_iim of=/dev/console bs=1 skip=6156 count=1 && if [ `dmesg | tail -1 | cut -d '=' -f 2 | cut -d ' ' -f 2` != 0x4 ]; then false; fi">Check eFuse 0x180C Value</CMD>
    <CMD type="push" body="$ echo eFuse writing complete">Done</CMD>
    <CMD type="push" body="$ echo Production Programming Complete! > /dev/tty0 2>&1">Done</CMD>
  </LIST>
</UCL>
